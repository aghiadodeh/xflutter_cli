// Generated By XFlutter Cli.
//
// more info: https://xflutter-cli.com
import 'package:xflutter_cli_modules_application/modules/products/data/models/entities/product/product.dart';
import '../widgets/products_list_widget.dart';
import 'package:xflutter_cli_modules_application/modules/products/mediators/paging/products_paging_controller.dart';
import 'package:xflutter_cli_modules_application/core/extensions/di_extension.dart';
import 'package:xflutter_cli_modules_application/common/router/app_router.dart';
import 'package:flutter/material.dart';
import '../viewmodels/products_list_viewmodel.dart';
import 'package:xflutter_cli_modules_application/common/ui/widgets/instance/instance_builder.dart';

class ProductsListMobileScreen extends StatelessWidget {
  const ProductsListMobileScreen({super.key});

  @override
  Widget build(BuildContext context) {
    return InstanceBuilder<ProductsListViewModel>(
      builder: (ProductsListViewModel viewModel) {
        return ProductsListWidget(
          controller: getIt<ProductsPagingController>(),
          onDelete: viewModel.deleteProduct,
          onPressed: (product) => appRouter.push(ViewProductDetails(id: product.id!)),
          onUpdate: (product) async {
            final result = await appRouter.push(UpdateProduct(id: product.id!));
            if (result is Product) {
              // update product in the list
              viewModel.updateProduct(result);
            }
          },
        );
      },
    );
  }
}
