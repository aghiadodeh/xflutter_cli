// Generated By XFlutter Cli.
//
// more info: https://xflutter-cli.com
import 'package:objectbox/objectbox.dart';
import 'package:xflutter_cli_modules_application/modules/categories/data/models/entities/category/category.dart';
import '../media/local_media.dart';

@Entity()
class LocalCategory {
  @Id()
  int id = 0;
  @Unique(onConflict: ConflictStrategy.replace)
  int? categoryId;
  @Property(type: PropertyType.date)
  DateTime? createdAt;
  @Property(type: PropertyType.date)
  DateTime? updatedAt;
  String? name;
  final toManyMedia = ToMany<LocalMedia>();
  List<LocalMedia>? media;

  LocalCategory({
    this.id = 0,
    this.categoryId,
    this.createdAt,
    this.updatedAt,
    this.name,
  });

  /// convert [Category] to [LocalCategory]
  factory LocalCategory.fromEntity(Category category) {
    final item = LocalCategory(
      categoryId: category.id,
      createdAt: category.createdAt,
      updatedAt: category.updatedAt,
      name: category.name,
    );

    if (category.media != null) {
      item.toManyMedia.addAll(category.media?.map((e) => LocalMedia.fromEntity(e)) ?? []);
    }

    return item;
  }

  /// convert [LocalCategory] to [Category]
  Category fromLocal() => Category(
        id: categoryId,
        createdAt: createdAt,
        updatedAt: updatedAt,
        name: name,
        media: toManyMedia.map((e) => e.fromLocal()).toList(),
      );
}
