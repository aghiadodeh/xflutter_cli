// Generated By XFlutter Cli.
//
// more info: https://xflutter-cli.com
import 'package:flutter/material.dart';
import 'package:flutterx_live_data/flutterx_live_data.dart';
import 'package:core/src/models/models.dart';

class ResultBuilder<T> extends StatelessWidget {
  final MutableLiveData<Result<T>> result;
  final Widget? idleBuilder;
  final Widget? loadingBuilder;
  final Widget Function(T data) dataBuilder;
  final Widget Function(String? error)? errorBuilder;

  const ResultBuilder(
    this.result, {
    required this.dataBuilder,
    this.idleBuilder,
    this.loadingBuilder,
    this.errorBuilder,
    super.key,
  });

  @override
  Widget build(BuildContext context) {
    return LiveDataBuilder<Result<T>>(
      data: result,
      builder: (context, value) {
        if (value is ResultIdle<T> && idleBuilder != null) {
          return idleBuilder!;
        } else if (value is ResultLoading<T>) {
          return loadingBuilder ?? const Center(child: CircularProgressIndicator.adaptive());
        } else if (value is ResultError<T> && errorBuilder != null) {
          return errorBuilder!(value.error);
        } else if (value is ResultData<T>) {
          return dataBuilder(value.data);
        }
        return const SizedBox();
      },
    );
  }
}
