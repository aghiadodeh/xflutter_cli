/// Generated By XFlutter Cli.
///
/// more info: https://xflutter-cli.aghiadodeh.com
import 'package:flutter/material.dart';
import 'package:xflutter_cli_test_application/ui/resources/themes/theme.dart';
import '../animations/interaction_widget.dart';

class CustomizedButton extends StatefulWidget {
  final Widget child;
  final bool enabled;
  final Function() callback;
  final ButtonStyle? style;
  const CustomizedButton({
    required this.child,
    required this.callback,
    this.enabled = true,
    this.style,
    Key? key,
  }) : super(key: key);

  @override
  State<CustomizedButton> createState() => _CustomizedButtonState();
}

class _CustomizedButtonState extends State<CustomizedButton> {
  final GlobalKey<InteractionWidgetState> globalKey = GlobalKey<InteractionWidgetState>();
  final GlobalKey<InteractionWidgetState> childKey = GlobalKey<InteractionWidgetState>();
  
  @override
  Widget build(BuildContext context) {
    return InteractionWidget(
      key: globalKey,
      type: AnimationType.scale,
      scaleValue: 0.015,
      duration: const Duration(milliseconds: 200),
      child: FilledButton(
        onPressed: () async {
          if (!widget.enabled) return;
          globalKey.currentState?.animate();
          childKey.currentState?.animate();
          widget.callback();
        },
        style: (widget.style ?? elevatedButtonTheme(darkMode: Theme.of(context).brightness == Brightness.dark).style)?.copyWith(
          overlayColor: MaterialStateProperty.all(Colors.transparent),
          backgroundColor: MaterialStateProperty.all(widget.enabled ? Theme.of(context).primaryColor : Colors.grey.shade400),
        ),
        child: InteractionWidget(
          duration: const Duration(milliseconds: 200),
          type: AnimationType.fade,
          fadeValue: 0.5,
          key: childKey,
          child: widget.child,
        ),
      ),
    );
  }
}